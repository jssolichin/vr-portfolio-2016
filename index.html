<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Hello, World! • A-Frame</title>
		<meta name="description" content="Hello, World! • A-Frame">
		<script src="https://aframe.io/releases/0.2.0/aframe.min.js"></script>
		<script src="node_modules/aframe-template-component/dist/aframe-template-component.min.js"></script>
		<script src="node_modules/aframe-layout-component/dist/aframe-layout-component.min.js"></script>
		<script src="node_modules/aframe-text-component/dist/aframe-text-component.min.js"></script>
		<script src="node_modules/aframe-htmltexture-component/node_modules/aframe-draw-component/dist/aframe-draw-component.js"></script>
		<script src="node_modules/aframe-htmltexture-component/dist/aframe-htmltexture-component.js"></script>
		<script src="script.js"></script>
		<style>
			body {
				background: linear-gradient(#CADCF7, #DB7F7F);	
				font-family: helvetica, arial, "sans-serif";
			}
			#header {
				text-align: center;
				padding: 20px;
				pointer-events: none;
			}
			#logo {
				width: 100px;	
			}
			.description {
				font-size: 20px;
			}
		</style>
	</head>
	<body>
		<a-scene>

			<a-assets>

			    <img id="one" src="images/one.png">
			    <img id="go-home" src="images/go-home-2x.png">
				<a-mixin id="border" material="color: #0000FF" geometry="width: .1; height: .1; depth: .2;"></a-mixin>
				<a-mixin id="growY" easing="ease-in" dur="1500" begin="open" attribute="height" repeat="0" from="0" to="4.9"></a-mixin>
				<a-mixin id="growX" easing="ease-in" dur="1500" begin="open" attribute="width" repeat="0" from="0" to="4.9"></a-mixin>
				<a-mixin id="shrinkY" easing="ease-in" dur="500" begin="close" attribute="height" repeat="0" from="4.9" to="0"></a-mixin>
				<a-mixin id="shrinkX" easing="ease-in" dur="500" begin="close" attribute="width" repeat="0" from="4.9" to="0"></a-mixin>
				<a-mixin id="text" material="color: #fff" text="text: Hello; size: 1; height: .2"></a-mixin>

				<script id="gallery" type="text/x-nunjucks-template">

					{% set tags = [
						{mainTitle: true, title: 'Title 1'},
						{title: 'Title 2', title2: 'WORLD'},
						{title: 'hello', title2: 'WORLD'},
						{title: 'hello', title2: 'WORLD'},
						{title: 'hello', title2: 'WORLD'}
					] %}

					{% macro galleryItem(data) %}
						<a-entity look-at="#center" item>
							<!-- subgallery -->
							<a-entity position="0 0 -70"  class="childrenCenter">
								<a-entity position="0 -2 0" rotation="-90 0 0" go-home>
									<a-image rotation="-90 0 0" width="10" height="10" src="#go-home" material="transparent: true" go-home>
										<a-animation easing="linear" attribute="rotation" from="0 0 0" to="0 0 360" repeat="indefinite" dur="120000"></a-animation>
									</a-image>
									<a-image position="0 0 .1" width="8.5" height="8.5" src="#go-home" material="transparent: true">
										<a-animation easing="linear" attribute="rotation" from="0 0 0" to="0 0 -360" repeat="indefinite" dur="120000"></a-animation>
									</a-image>
								</a-entity>
								<a-entity id="lookCenter" layout="type: circle; radius: 3">
									{% for z in range(5) %}
										<a-entity look-at="#center">
											<a-curvedimage src="#one" width="12.8" height="10" 
											material="transparent:true;" geometry="primitive:plane;"  rotation="0 -30 0" 
											radius="20" theta-length="55" ></a-curvedimage> 
										</a-entity>
									{% endfor %}
								</a-entity>
							</a-entity>

							<!-- main gallery image -->
							<a-curvedimage src="#one" width="12.8" height="10" 
							position="0 2.2 11" material="transparent:true;" geometry="primitive:plane;" rotation="0 150 0" 
							radius="20" theta-length="55" main-item></a-curvedimage> 

							<!-- main gallery title -->
							<a-entity position="-6 4.3 -1.5">
								<a-entity position="0 .6 0" mixin="text" text="text: {{tag.title}};"></a-entity>
								<a-entity position="0 -.6 0" mixin="text" text="text: {{tag.title2}};"></a-entity>
								<a-box position="2.5 -1.2 0" material="color: red;" height=".25" width="5" depth=".2"></a-box>
							</a-entity>

							<!-- main gallery description
							<a-entity geometry="primitive: plane; width: 6; height: 1" position="0 -1 5" rotation="-60 0 0" draw="width: 600; height: 100; background: transparent;" htmltexture="asset: .description"></a-entity>
 -->
						</a-entity>
					{% endmacro %}

					<!-- 92.5 -->
					<a-entity layout="type: circle; radius: 10" rotation="0 92.5 0" position="0 0 0">

					{% for tag in tags %}
						{% if tag.mainTitle %}
							<a-entity look-at="#center">
								<a-curvedimage src="#one" width="12.8" height="10" 
								position="0 2.2 11" material="transparent:true;" geometry="primitive:plane;" rotation="0 150 0" 
								radius="20" theta-length="55"></a-curvedimage> 

							<a-entity position="-3.5 2 0" rotation="20 0 0">
								<a-entity position="0 1.7 4" mixin="text" text="text: JSSOLICHIN;"></a-entity>
								<a-entity position="-1.2 -.6 1" mixin="text" text="text: UX / Developer / Creative; size: .6"></a-entity>
								<a-box position="3.75 -2 0" material="color: red;" height=".25" width="5" depth=".2"></a-box>
							</a-entity>

							</a-entity>
						{% else %}
							{{ galleryItem(tag) }}
						  {% endif %}
					{% endfor %}

					</a-entity>
				</script>

				<div class="description" >
					Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam iaculis odio mi, a semper erat rhoncus et. Etiam nec sapien urna. Suspendisse potenti. Duis placerat nunc nec neque venenatis, id malesuada nulla dapibus. Proin eleifend metus eget mauris imperdiet malesuada eu et tortor. 
				</div>

			</a-assets>

			<a-entity light="type: hemisphere; groundColor: #CADCF7; color: #DB7F7F; intensity: .4"></a-entity>


			<a-entity  id="camera" position="0 0 0"  click-listener>
				<a-camera position="0 2 0" >
				<a-entity light="type: point; intensity: 1; distance: 100; decay: 2" position="0 1 0" rotation="0 -90 0" ></a-entity>
					<a-entity 
						position="0 0 -3"
						geometry="primitive: ring; radiusOuter: 0.30; radiusInner: 0.20;"
						material="color: cyan; shader: flat"
						cursor="maxDistance: 30; fuse: true">
						<a-animation begin="click" easing="ease-in" attribute="scale"
							fill="backwards" from="0.1 0.1 0.1" to="1 1 1" dur="150"></a-animation>
						<a-animation begin="fusing" easing="ease-in" attribute="scale"
							fill="forwards" from="1 1 1" to="0.1 0.1 0.1" dur="1500"></a-animation>
					</a-entity>
				</a-camera>
			</a-entity>

			<a-entity id="center" position="0 0 0"></a-entity>

			<a-entity template="src: #gallery" data-num="5"></a-entity>


		</a-scene>

		<div id="header">
			<img id="logo" src="images/logo-white.png">
		</div>

	</body>
</html>
